---
output: html_document
editor_options:
  chunk_output_type: console
---

## **FISH AND INVERTEBRATES**

This module describes outputs of fish and marine invertebrates derived from a variety of data sources, internal and external to DFO. Species that have been listed under the Species at Risk Act (SARA), or assessed by the Committee on the Status of Endangered Wildlife in Canada (COSEWIC), are summarized in independent tables. Area-specific outputs are provided in sub-sections labelled according to each data source. Data descriptions, references and contact information are provided at the beginning of each sub-section.

### **Maritimes Research Vessel (RV) Survey**{#RV-section}

```{r rv-load, include=FALSE}
load_rdata(c("rv_rr"), "MAR", env = environment())
```

```{r rv-meta, results='asis'}
write_meta(rv_rr, "EN")
```

Dataset description from the Open Data record [@OpenData_MAR_RV]:
```{r rv-text, results='asis'}
writeLines(noquote(rv_rr$text$en))
```

```{r table-RV-read, echo=FALSE, cache=FALSE, include = FALSE}
table_RV <- read.csv(here::here("app/data/misc/table_RV_EN.csv"))
table_RV <- table_RV %>% dplyr::rename("Season/Months" = Season.Months, "Description of Geographic Range" = Description.of.Geographic.Range)
```

```{r RV-table-setup}
knitr::kable(table_RV, align = "l",
      caption = "Summary of data collected during the 4 distinct Maritimes Research Vessel (RV) Surveys. See Chadwick et al. (2007) for more information on the timeline and periodic adjustment of the 4VSW surveys.", booktabs = T, escape = F, linesep = "") %>% kable_styling(bootstrap_options = "striped", full_width = T, position = "left")
```

#### ***Area-specific Maritimes Research Vessel (RV) Survey search results***

```{r RV-results, include=FALSE, cache=FALSE}
outputList <- master_intersect(rv_rr$data_sf, mapDataList, Year = minYear)

tableList <- create_table_RV(outputList$studyData, listed_species)
rvAllTable <- tableList$allSpecies
rvSarTable <- tableList$sarData
summarySarTable <- add_col_to_sar_summary(summarySarTable, "[RV](#RV-section)", rvSarTable, "Common Name", "Individuals")

```

```{r RV-check, comment="", prompt=TRUE, echo=FALSE, results='asis'}
if (is.null(outputList$studyData)) {
    Report_RV <- "* There are no relevant records in the Maritimes Research Vessel (RV) Survey for this search area."
    surveyTypeDf <- NULL
  } else {
    Report_RV <- "* There are relevant records in the Maritimes Research Vessel (RV) Survey for this search area."
    surveyTypeTable <- table(unique(outputList$studyData[,c('ELAT','ELONG','geometry', 'surveyType')])$surveyType)
    surveyTypeDf <- as.data.frame(surveyTypeTable)
    names(surveyTypeDf) <- c("Suvery", "Number of trawl samples")
    rownames(surveyTypeDf) <- NULL
  }
Report_RV<-noquote(Report_RV)
writeLines(Report_RV)

if (!is.null(surveyTypeDf) > 0) {
    knitr::kable(surveyTypeDf, align="l", caption="Breakdown of surveys present in search area.", booktabs = T, escape = F, linesep="") %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
  }


```

```{r RV-plot, fig.height=8, fig.width=11, fig.cap=paste(write_caption_blurb(rv_rr, "EN"), ' Map of the Maritimes Research Vessel (RV) Trawl Survey data in relation to the search area (red outline). Black lines and arrows indicate the location and direction of each bottom otter trawl sample. Arrows shown outside of the search area are visualized for context, but not included in the results below.')}
if (!is.null(outputList$studyData)) {
areaMap +
    geom_segment(aes(x = outputList$mapPoints$long,
                     y = outputList$mapPoints$lat,
                     xend = outputList$mapPoints$ELONG,
                     yend = outputList$mapPoints$ELAT), arrow=arrow(length = unit(0.2,"cm")), size = 0.5)
}
```
<br>
```{r RV-SAR-table}
if (!is.null(outputList$studyData)) {
  if (nrow(rvSarTable) > 0) {
    knitr::kable(rvSarTable, align="l", caption=paste("\\label{tab:rv_SAR_table}",  write_caption_blurb(rv_rr, "EN"), "Maritimes Research Vessel (RV) Survey records of species opbserved within the search area and listed by the <i>Species at Risk Act</i> (SARA), or assessed by the Committee on the Status of Endangered Wildlife in Canada (COSEWIC). Frequency represents the number of trawls in which a given species was sampled, relative to the total number of trawls within the search area. <b>The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area.</b>"), booktabs = T, escape = F, linesep="") %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
  }
}
```
<br>
```{r RV-freq-table}
if (!is.null(outputList$studyData)) {
knitr::kable(rvAllTable, align="l", caption=paste("\\label{tab:rv_freq_table}", write_caption_blurb(rv_rr, "EN"), "Maritimes Research Vessel (RV) Survey records of <u>all species</u> observed within the search area, summarized by species or species group. Frequency represents the number of trawls in which a given species was sampled, relative to the total number of trawls within the search area. <b>The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area.</b>"), booktabs = T, escape = F, linesep="") %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
}
```

### **Passamaquoddy Bay Biodiversity Trawls (PBBT)**  {#pasBay-section}

```{r pasBay-load, include=FALSE}
load_rdata(c("pasBay_rr"), "MAR", env = environment())
```

```{r pasBay-meta, results='asis'}
write_meta(pasBay_rr, "EN")
```

Dataset description from the Open Data record [@OpenData_pasBay]:
```{r pasBay-text, results='asis'}
writeLines(noquote(pasBay_rr$text$en))
```

#### ***Area-specific search results for the Passamaquoddy Bay Biodiversity Trawls***

```{r pasBay-results, include=FALSE, cache=FALSE}
pasBayClipped <- master_intersect(pasBay_rr$data_sf, mapDataList)

tableList <- create_sar_tables(pasBayClipped$studyData, listed_species)
pasBayAllTable <- tableList$allSpecies
pasBaySarTable <- tableList$sarData
summarySarTable <- add_col_to_sar_summary(summarySarTable, "[PBBT](#pasBay-section)", pasBaySarTable, "Common Name", "Common Name")

```

```{r pasBay-check, comment="", prompt=TRUE, echo=FALSE, results='asis'}
pasBayCheck <- if (!is.null(pasBayClipped$studyData)) {
    "* There are relevant records in the Passamaquoddy Bay Biodiversity Trawls for this search area."
  } else {
    "* There are no relevant records in the Passamaquoddy Bay Biodiversity Trawls for this search area. "
  }
writeLines(noquote(pasBayCheck))
```

```{r pasBay-plot, fig.height=8, fig.width=11, fig.cap=paste(write_caption_blurb(pasBay_rr, "EN"), 'Map showing the search area defined by the user (red outline) used to query information from the Passamaquoddy Bay Biodiversity Trawls.  Blue lines indicate the location of each trawl sample.')}

if (!is.null(pasBayClipped$studyData)) {
    plot_rr_sf(areaMap, pasBayClipped$mapData, lwd = 0.7, colour = "blue")
}
```
<br>
```{r pasBay-SAR-table}
if (!is.null(pasBayClipped$studyData)) {
  if (nrow(pasBaySarTable) > 0) {
    knitr::kable(pasBaySarTable, align="l", caption="\\label{tab:pasBay_SAR_table}Quality tier: High. Security level: None. Passamaquoddy Bay Biodiversity Trawl observation records of species contained within the search area and listed by the Species At Risk Act (SARA), or assessed by the Committee on the Status of Endangered Wildlife in Canada (COSEWIC). The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area. </b>", booktabs = T, escape = F, linesep="") %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
  }
}
```
<br>
```{r pasBay-all-table}
if (!is.null(pasBayClipped$studyData)) {
knitr::kable(pasBayAllTable, align="l", caption="\\label{tab:pasBay_all_table}Quality tier: High. Security level: none. Passamaquoddy Bay Biodiversity Trawl observation records of all species contained within the search area, summarized by species or species group. The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area. </b>", booktabs = T, escape = F, linesep="") %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
}
```


### **Inshore Lobster Trawl Survey (ILTS)**  {#ilts-section}

```{r ilts-load, include=FALSE}
load_rdata(c("ilts_rr"), "MAR", env = environment())
```

```{r ilts-meta, results='asis'}
write_meta(ilts_rr, "EN")
```

From [@ILTS]: “An annual trawl survey is conducted in Southwestern Nova Scotia and the Bay of Fundy to assess the lobster stocks in Lobster Fishing Areas (LFA) 34. The survey is conducted with the Northeast Fisheries Science Center Ecosystem Survey Trawl (NEST), a small mesh trawl with a cod end liner, which ensures the capture of various sizes of lobster. The dimensions and location of the trawl are monitored and recorded throughout the tow using an electronic trawl mensuration system. In addition, water temperature and depth are also recorded. The target tow length is 1 kilometer which is tracked using an Olex marine charting system. Vessel crew, DFO science staff and a contracted at sea observer work together to perform required tasks and collect all relevant data. Catch from each tow is separated by species, weighed and counted. Length frequency data is collected on select groundfish and crab species, detailed morphometric data is collected on each lobster.”


#### ***Area-specific search results for the Lobster Trawl Survey***

```{r ilts-results, include=FALSE, cache=FALSE}
iltsClipped <- master_intersect(ilts_rr$data_sf, mapDataList)

tableList <- create_sar_tables(iltsClipped$studyData, listed_species)
iltsAllTable <- tableList$allSpecies
iltsSarTable <- tableList$sarData
summarySarTable <- add_col_to_sar_summary(summarySarTable, "[ILTS](#ilts-section)", iltsSarTable, "Common Name", "Common Name")


```

```{r ilts-check, comment="", prompt=TRUE, echo=FALSE, results='asis'}
iltsCheck <- if (!is.null(iltsClipped$studyData)) {
    "* There are relevant records in the Lobster Trawl Survey for this search area."
  } else {
    "* There are no relevant records in the Lobster Trawl Survey for this search area. "
  }
writeLines(noquote(iltsCheck))
```


```{r ilts-plot, fig.height=8, fig.width=11, fig.cap=paste(write_caption_blurb(ilts_rr, "EN"), 'Map showing the search area defined by the user (red outline) used to query information from the Lobster Trawl Survey. Blue lines indicate the location of each NEST trawl sample.')}

if (!is.null(iltsClipped$studyData)) {
    plot_rr_sf(areaMap, iltsClipped$mapData, lwd = 1, colour = "blue")
}
```
<br>
```{r ilts-SAR-table}
if (!is.null(iltsClipped$studyData)) {
  if (nrow(iltsSarTable) > 0) {
    knitr::kable(iltsSarTable, align="l", caption="\\label{tab:ilts_SAR_table}Quality tier: High. Security level: Protected B. Inshore Lobster Trawl Survey (ITLS) observation records of species contained within the search area and listed by the Species At Risk Act (SARA), or assessed by the Committee on the Status of Endangered Wildlife in Canada (COSEWIC). The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area. </b>", booktabs = T, escape = F, linesep="") %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
  }
}
```
<br>
```{r ilts-all-table}
if (!is.null(iltsClipped$studyData)) {
knitr::kable(iltsAllTable, align="l", caption="\\label{tab:ilts_all_table}Quality tier: High. Security level: Protected B. Inshore Lobster Trawl Survey (ITLS) observation records of all species contained within the search area, summarized by species or species group. The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area. </b>", booktabs = T, escape = F, linesep="") %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
}
```


### **Industry Survey and Maritimes Fishery Databases**  

#### ***Industry Survey Database (ISDB)*** {#ISDB-section}

```{r isdb-load, include=FALSE}
load_rdata(c("isdb_rr"), "MAR", env = environment())
```

```{r isdb-meta, results='asis'}
write_meta(isdb_rr, "EN")
```

The Industry Survey Database (ISDB) is a departmental database containing at-sea fish catch observations from commercial fishing vessels operating in the Northwest Atlantic. Records can be associated with regular commercial fishing activities, or can represent industry-led scientific surveys. Industry surveys are not spatially or temporally synoptic and, therefore, integrating additional information on presence and/or habitat use (i.e., spawning, migration, feeding areas) from larger-scale studies is strongly recommended. Fisheries catch and effort information for an individual license holder is considered personal information and is protected under section 19 of the Access to Information Act (https://laws-lois.justice.gc.ca/eng/acts/a-1/page-5.html#h-12), and, for a corporate license holder, is considered to be sensitive, proprietary information and protected under Section 20 of the Access to Information Act (https://laws-lois.justice.gc.ca/eng/acts/a-1/page-5.html#h-13).

Without written consent, DFO is not permitted to release information or data products from ISDB (e.g., maps and data layers) that might reveal personal or third party information such as catch, landed values, and vessel-specific fishing locations, as this information is considered confidential. Information on privacy policy is available in the DFO staff informal release guidelines (i.e., Appendix B – “Catch and Effort and Quota Information: Do’s and Don’ts for Informal Release” (\\\\ent.dfo-mpo.ca\\ATLShares\\Shared\\ATIP Information\\Information_Release_Guidelines-eng.docx). If you are interested in including observer data in a publication, please remember to aggregate it (https://github.com/Maritimes/Mar.utils/blob/master/R/assess_privacy.r).

#### ***The Maritime Fishery Information System (MARFIS)***{#MARFIS-section}

```{r marfis-load, include=FALSE}
load_rdata(c("marfis_rr"), "MAR", env = environment())
```

```{r marfis-meta, results='asis'}
write_meta(marfis_rr, "EN")
```

The Maritimes Fishery Information System (MARFIS) is a DFO database, managed by the Policy & Economics Branch. MARFIS contains catch and effort, quota, and licensing information for the Maritimes Region. Log information for all commercial fisheries that land within this region is associated with this data. If a Maritimes Region commercial vessel makes landings in another DFO region or outside of Canadian waters, information is not included in the MARFIS database, irrespective of whether that vessel originated in Maritimes Region. The majority of catch information is related to commercial offloads i.e. dockside monitoring programs. Reported information contained within MARFIS is not considered spatially or temporally synoptic and, therefore, integrating additional information on presence and/or habitat use (i.e., spawning, migration, feeding) from larger-scale studies is strongly recommended. There is also more limited data related to discards and the Species At Risk data logs. Not all catch records have associated lat/lon coordinates or information on fishing effort. However, generally all records are associated with a NAFO Division and NAFO Unit Area, even if no coordinates have been provided. Production data (<4 years old) are considered preliminary and subject to change without notice. Changes to archived data (>4 years old) may also occur but are generally limited. Ongoing QA/QC work is done on the MARFIS database, but not all errors are corrected. If you have data errors, questions, or corrections, you can send them to our data quality inbox: CDDDataQuality@dfo-mpo.gc.ca. This information about MARFIS was provided by Colin.O'Neil@dfo-mpo.gc.ca (July 2020, Policy & Economics Branch). If you are interested in including comercial catch data in a publication, please remember to aggregate it (https://github.com/Maritimes/Mar.utils/blob/master/R/assess_privacy.r).

#### ***Area-specific MARFIS & ISDB search results***

```{r marfis-isdb-results, include=FALSE, cache=FALSE}
outputListI <- master_intersect(isdb_rr$data_sf, mapDataList, Year = minYear)
outputListM <- master_intersect(marfis_rr$data_sf, mapDataList, Year = minYear)

tableList <- create_table_ISDB(outputListI$studyData, listed_species,
                               speciesTable = ISSPECIESCODES)
isdbAllTable <- tableList$allSpeciesData
isdbSarTable <- tableList$sarData
summarySarTable <- add_col_to_sar_summary(summarySarTable, "[ISDB](#ISDB-section)", isdbSarTable, "Common Name", "Records")

tableList <- create_table_MARFIS(outputListM$studyData, listed_species, speciesTable = MARFISSPECIESCODES)
marfisAllTable <- tableList$allSpeciesData
marfisSarTable <- tableList$sarData
summarySarTable <- add_col_to_sar_summary(summarySarTable, "[MARFIS](#MARFIS-section)", marfisSarTable, "Common Name", "Records")
```
*
```{r isdb-check, comment="", prompt=TRUE, echo=FALSE, results='asis'}
Report_isdb <- if (is.null(outputListI$studyData)) {
    "There are no relevant records in the Industry Survey Database (ISDB) for this search area."
  } else {
    "There are relevant records in the Industry Survey Database (ISDB) for this search area."
  }
Report_isdb <- noquote(Report_isdb)
writeLines(Report_isdb)
```

*
```{r marfis-check, comment="", prompt=TRUE, echo=FALSE, results='asis'}
Report_marfis <- if (is.null(outputListM$studyData)) {
    "There are no relevant records in the Maritimes Fishery Information System (MARFIS) for this search area."
  } else {
    "There are relevant records in the Maritimes Fishery Information System (MARFIS) for this search area."
  }
Report_marfis<-noquote(Report_marfis)
writeLines(Report_marfis)
```

```{r marfis-isdb-plot, fig.height=8, fig.width=11, fig.cap=paste(write_caption_blurb(marfis_rr, "EN"), 'Map showing the search area defined by the user (red outline) used to query aggregated information from Maritimes Fishery Information System (MARFIS) and/or Industry Survey Database (ISDB) observation records shown as black points, for all species. Rule of five was not applied.')}
if (!is.null(outputListI$studyData) & !is.null(outputListM$studyData)) {
  areaMap + geom_point(data = outputListI$mapPoints, aes(x = long, y = lat), size = 2, shape = 16, col = "black") + geom_point(data = outputListM$mapPoints, aes(x = long, y = lat), size = 2, shape = 16, col = "black")
} else if (!is.null(outputListI$studyData)) {
    areaMap + geom_point(data = outputListI$mapPoints, aes(x = long, y = lat), size = 2, shape = 16, col = "black")
} else if (!is.null(outputListM$studyData)) {
        areaMap + geom_point(data = outputListM$mapPoints, aes(x = long, y = lat), size = 2, shape = 16, col = "black")
}
```
```{r isdb-SAR-table}
if (!is.null(outputListI$studyData)) {
knitr::kable(isdbSarTable, align="l", caption="Quality tier: Medium. Security level: Protected B. Industry Survey Database (ISDB) records of species observed within the search area and listed by the <i>Species at Risk Act</i> (SARA), or assessed by the Committee on the Status of Endangered Wildlife in Canada (COSEWIC). <b>The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area.</b>", booktabs = T, escape = F, linesep="")} %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
```
<br><br>
```{r isdb-all-table}
if (!is.null(outputListI$studyData)) {
  knitr::kable(isdbAllTable, align="l", caption="Quality tier: Medium. Security level: Protected B. Industry Survey Database (ISDB) records of <u>all species</u> observed within the search area, summarized by species or species group. Records do not necessarily correspond to number of individuals. <b>The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area.</b>", booktabs = T, escape = F, linesep="")} %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
```

```{r marfis-SAR-table}
if (!is.null(outputListM$studyData)) {
  knitr::kable(marfisSarTable, align="l", caption="Quality tier: Medium. Security level: Protected B. Maritimes Fishery Information System (MARFIS) records of species observed within the search area and listed by the <i>Species At Risk Act</i> (SARA), or assessed by the Committee on the Status of Endangered Wildlife in Canada (COSEWIC). <b>The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area.</b>", booktabs = T, escape = F, linesep="")} %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
```
<br><br>
```{r marfis-all-table}
if (!is.null(outputListM$studyData)) {
  knitr::kable(marfisAllTable, caption="Quality tier: Medium. Security level: Protected B. Maritimes Fishery Information System (MARFIS) records of <u>all species</u> observed within the search area, summarized by species or species group. <b>The absence of a species in this table should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area.</b>", booktabs = T, escape = F, linesep="")  %>% column_spec(1, width="15cm")
} %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
```

### **Ocean Biodiversity Information System (OBIS)**{#OBIS-section}

```{r obis-load, include=FALSE}
load_rdata(c("obisFish_rr"), "MAR", env = environment())
```

```{r obis-meta, results='asis'}
write_meta(obisFish_rr, "EN")
```

OBIS is a global, open-access data and information clearing-house on marine biodiversity for science, conservation, and sustainable development [@OBIS]. Their vision is to build and maintain a global alliance that collaborates with scientific communities to facilitate free and open access to, and application of, biodiversity and biogeographic data and information on marine life. OBIS searches were conducted to find additional relevant records for species listed by SARA, or assessed by COSEWIC. Future iterations of this reporting tool will aim at expanding our quality checks of the OBIS database.

#### ***Area-specific OBIS fish and invertebrate search results***

```{r obis-results, include=FALSE, cache=FALSE}
outputList <- master_intersect(obisFish_rr$data_sf, mapDataList, Year = minYear)

obisTable <- create_sar_tables(outputList$studyData, listed_species, extraCols = c())$sarData
summarySarTable <- add_col_to_sar_summary(summarySarTable, "[OBIS](#OBIS-section)", obisTable, "Common Name", "Common Name")

```
*
```{r obis-check, echo=FALSE, results='asis',}
Report_obis <- if (is.null(outputList$studyData)) {
  "There are no relevant records in the Ocean Biodiversity Information System (OBIS) for this search area."
} else {
  "There are relevant records in the Ocean Biodiversity Information System (OBIS) for this search area."
}
Report_obis<-noquote(Report_obis)
writeLines(Report_obis)
```

```{r obis-plot, fig.height=8, fig.width=11, fig.cap=paste(write_caption_blurb(obisFish_rr, "EN"), 'Map showing the search area defined by the user (red outline) was used to query information from Ocean Biodiversity Information System (OBIS) observation records, for species contained within the search area and listed by the <i>Species at Risk Act</i> (SARA), or assessed by the Committee on the Status of Endangered Wildlife in Canada (COSEWIC). Sightings on land are an indicator that the sighting data have not yet been completely error-checked or that animals were sighted from shore. Observations displayed outside of the search area are visualized for context, but not included in the survey results listed below. The absence of a species in this figure should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area.')}
if (!is.null(outputList$studyData)) {
  plot_rr_sf(areaMap, outputList$mapData)
}
```
```{r obis-table, echo=FALSE, results='asis', caption="Priority species with observations contained in the OBIS database within the search polygon area."}
if (!is.null(outputList$studyData)) {
  knitr::kable(obisTable, align="l", caption="Quality tier: Medium. Security level: none. Ocean Biodiversity Information System (OBIS) observation records of species contained within the search area and listed by the <i>Species At Risk Act</i> (SARA), or assessed by the Committee on the Status of Endangered Wildlife in Canada (COSEWIC). <b>The absence of a species in this figure should be interpreted as an absence of reporting, not necessarily as an absence of the species in the area.</b>", booktabs = T, escape = F, linesep="") %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
}
```

### **Atlantic Sturgeon Foraging Areas in the Upper Bay of Fundy ** {#sturg-section}
```{r sturg-load, include=FALSE}
load_rdata(c("sturg_rr"), "MAR", env = environment())
```

```{r sturg-meta, results='asis'}
write_meta(sturg_rr, "EN")
```

Areas in the Minas Basin were selected for spatial analysis to examine foraging grounds for Atlantic Sturgeon, through a combination of using UAV’s, a novel approach to geoscience, with bottom sediment grain-size collection. Temporal studies will be carried out in the southern bight of Minas Basin at the Kingsport tidal-channel-flat complex to understand and document temporal morphodynamics. The Kingsport area will be studied as these tidal flats are used extensively by Atlantic Sturgeon for foraging from June to September and a large data set of grain size exists that can be used to help validate morphodynamic models. Ultimately this project will be used to predict future change to the tidal flats of the Minas Basin if a large scale tidal project such as the one proposed for Minas Channel is approved and to help understand Atlantic Sturgeons use of muddy tidal flats. This summary provides updates of validated foraging grounds for Atlantic Sturgeon identified though this project.

#### ***Area-specific Atlantic Sturgeon search results:***
```{r sturg-results, include=FALSE, cache=FALSE}
sturgOutputList <- master_intersect(sturg_rr$data_sf, mapDataList)

if (!is.null(sturgOutputList$studyData)) {
   sturgSummaryRow <- data.frame("CommonName" = c("Atlantic Sturgeon"))
} else {
  sturgSummaryRow <- NULL
}
summarySarTable <- add_col_to_sar_summary(summarySarTable, "[Sturgeon](#sturg-section)",
                                          sturgSummaryRow, "CommonName", "CommonName")

```


```{r sturg-check, echo=FALSE, results='asis',}
sturgCheck <- if (is.null(sturgOutputList$studyData)) {
  "* There are no relevant records of Atlantic Sturgeon foraging areas (selected sites) for this search area. "
}else {
  "* There are relevant records of  Atlantic Sturgeon foraging areas (selected sites) for this search area. "
}
writeLines(noquote(sturgCheck))
```

```{r sturg-plot, fig.height=8, fig.width=11, fig.cap=paste(write_caption_blurb(sturg_rr, "EN"), 'Survey sites illustrating Atlantic Sturgeon Foraging Areas sampled during 2020 in the Upper Bay of Fundy. Note that this map mostly represents survey sites. This map should not be interpreted as a comprehensive list of Atlantic Sturgeon foraging areas as additional locations are available, although not yet sampled, in the upper Bay of Fundy.')}
if (!is.null(sturgOutputList$studyData)) {
  plot_rr_sf(areaMap, sturgOutputList$mapData, sturg_rr$attribute, outlines=FALSE,
             labelData=sturgOutputList$mapData, labelAttribute = "siteId")
}
```

```{r sturg-table, echo=FALSE, results='asis', caption="MPA table"}
if (!is.null(sturgOutputList$studyData)) {
  sturgTable <- dplyr::select(sturgOutputList$mapData, c("siteId", "Site"))
  st_geometry(sturgTable) <- NULL
  row.names(sturgTable) <- NULL
  names(sturgTable) <- c("Site Id", "Site")
  knitr::kable(sturgTable, align="l", caption="Quality tier: High Security level: none. Names of Survey sites for Atlantic Sturgeon Foraging Areas sampled during 2020.</b>", booktabs = T, escape = F, linesep="") %>% kable_styling(bootstrap_options = "striped", full_width = F, position = "left")
}
```

### **OCEARCH Shark Tracker** {#OCEARCH-section}

```{r ocearch-load, include=FALSE}
load_rdata(c("ocearch_rr"), "MAR", env = environment())
```

```{r ocearch-meta, results='asis'}
write_meta(ocearch_rr, "EN")
```

OCEARCH is a data-centric organization built to help scientists collect previously unattainable data in the ocean while open sourcing our research and explorations. Open sourcing and inclusion at every level, and in real-time, allows the world to participate in their projects while being aware of the developing science. OCEARCH shares the data, including samples collected and tracking data, with collaborating institutions and students who request them for their studies. The tracking data is also open-sourced to the public via the OCEARCH Tracker. The OCEARCH Tracker is a free app that lets users observe the navigational pattern of animals that have been tagged with satellite tracking technology. White Shark (_Carcharodon carcharias_) locations from satellite trackers are summarized in this section from 1 Jan 2013 to 31 Oct 2020. A speed filter was run with 3 m/s as the maximum speed and 2.5 km as the potential error of locations. This filter removed approximately 100 locations out of 2,000. Resulting points ere then visualized in ArcGIS to identify potential errors and remove locations that seemed implausible. Each shark location was individually plotted to do a second visual examination and to remove or flag errors/outliers. There is additional QA/QC that could still be performed to this dataset to capture additional issues (e.g. there may be single shark locations in Canadian waters during a period of time that the speed filter would not remove or that were not captured in the visual inspection). The absence of White Sharks in this section map should be interpreted as an absence of tracking data, not necessarily as an absence of the species in the area.

#### ***Area-specific OCEARCH Shark Tracker search results***
```{r ocearch-results, include=FALSE, cache=FALSE}
ocearchOutputList <- master_intersect(ocearch_rr$data_sf, mapDataList)

if (!is.null(ocearchOutputList$studyData)) {
   ocearchSummaryRow <- data.frame("CommonName" = c("White Shark"))
} else {
  ocearchSummaryRow <- NULL
}
summarySarTable <- add_col_to_sar_summary(summarySarTable, "[OCEARCH](#OCEARCH-section)",
                                          ocearchSummaryRow, "CommonName", "CommonName")

```

*
```{r ocearch-check, echo=FALSE, results='asis',}
Report_ocearch <- if (is.null(ocearchOutputList$studyData)) {
  "There are no relevant White Shark records in the OCEARCH Shark Tracker for this search area."
} else {
  numRecords <- length(ocearchOutputList$studyData$geometry)
  distinctIndv <- dplyr::n_distinct(ocearchOutputList$studyData$ID)
  paste("There are", numRecords, "relevant White Shark records for", distinctIndv, "individuals in OCEARCH Shark Tracker search results for this search area.")
}
Report_obis<-noquote(Report_ocearch)
writeLines(Report_ocearch)
```
```{r ocearch-plot, fig.height=8, fig.width=11, fig.cap=paste(write_caption_blurb(ocearch_rr, "EN"), 'OCEARCH track observations of White Sharks observed within the search area (red outline). Dataset set has not yet been completely error-checked. The absence of White Shark in this figure should be interpreted as an absence of tracking data, not necessarily as an absence of the species in the area.')}
if (!is.null(ocearchOutputList$studyData)) {
  plot_rr_sf(areaMap, ocearchOutputList$mapPoints)
}
```
